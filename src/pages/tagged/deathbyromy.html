<div id="fc_panel">
    <div class="img">
        <img src="https://i0.wp.com/www.ragerobot.com/wp-content/uploads/2021/02/Death.jpg?fit=1392%2C718&ssl=1" alt=""/>
    </div>

    <div class="txt">
        <div class="left">
            <h2>[[current_fc.name]]</h2>
            <p class="subtitle" v-if="current_fc.alias">alias [[current_fc.alias]]</p>
        </div>

        <ul class="mini_nav">
            <li>
                <a :href="`/tagged/${current_fc.name}`">All</a>
            </li>
            <li v-if="current_fc.avatar == true">
                <a :href="`/tagged/${current_fc.name} avatars`">Avatars</a>

            </li>
            <li v-if="current_fc.gifs == true">
                <a :href="`/tagged/${current_fc.name} gifs`">Gifs</a>

            </li>
            <li v-if="current_fc.crackships == true">
                <a :href="`/tagged/${current_fc.name} crackships`">Crackships</a>

            </li>
            <li v-if="current_fc.icons == true">
                <a :href="`/tagged/${current_fc.name} icons`">Icons</a>

            </li>
            <li v-if="current_fc.gificons == true">
                <a :href="`/tagged/${current_fc.name} gificons`">Gif icons</a>

            </li>
        </ul>

        <ul class="right">
            <li v-if="current_fc.gender">
                <span class="category">Gender</span>
                <span class="answer">[[current_fc.gender]]</span>
            </li>
            <li v-if="current_fc.birth">
                <span class="category">Date of birth</span>
                <span class="answer">[[current_fc.birth]]</span>
            </li>
             <li v-if="current_fc.nationality">
                <span class="category">Nationality</span>
                <span class="answer">[[current_fc.nationality]]</span>
            </li>
            <li v-if="current_fc.eth">
                <span class="category">Ethnicity</span>
                <span class="answer">[[current_fc.eth]]</span>
            </li>
            <li v-if="current_fc.occupation">
                <span class="category">Occupation</span>
                <span class="answer">[[current_fc.occupation]]</span>
            </li>
            <li v-if="current_fc.tattoos">
                <span class="category">Particularities</span>
                <span class="answer">[[current_fc.tattoos]]</span>
            </li>
        </ul>
    </div>
</div>

{{> posts_container}}

<script>
    var app = new Vue({
        delimiters : ['[[',']]'],
        el: '#fc_panel',
        data: {
        fcs: [],
        current_fc: {},
        fc_name: '',
        hasAlias: false,
        badRoute: false
      },
      mounted() {
        axios.get('https://raw.githubusercontent.com/itsEXORDIUM/my-assets/main/jsons/exofinds_fcs.json')
        .then(response => {
            this.fcs = response.data.fcs;

            // check if current fc
            let current_url = window.location.pathname;
            let self = this;

            if(current_url != '/') {
                // let directory = document.getElementById('directory');
                // directory.style.display = "none";
            }

            if(current_url.includes('tagged')) {
                let clear_url = current_url.replace('/tagged/', '');
                let lowercased = clear_url.toLowerCase();
                let tagged = lowercased.replaceAll('%20', ' ');
                tagged = tagged.replaceAll('.html', '');

                if (tagged.includes('%27')) {
                    tagged = tagged.replaceAll('%27', '\'');
                } else if (tagged.includes('%c3%b8')) {
                    tagged = tagged.replace('%c3%b8', 'Ã¸');
                }

                this.fcs.forEach(function(fc) {
                    if(tagged.includes(fc.name.toLowerCase())) {
                        self.current_fc = fc;
                        self.fc_name = fc.name;

                        if(fc.alias) {
                            self.hasAlias= true;
                        }

                       //on ajoute la classe sur le body
                       $('#index').addClass('tagged');
                    }
                });

                this.getLastAvatar();
            }
        })
      },
      methods: {
          getLastAvatar: function() {
            // $.ajax("https://exofinds.tumblr.com/tagged/deathbyromy", {
            //     success: function(response) {
            //     $("body").html(response);
            //     }
            // });
          }
      }
    })
</script>